---
import Layout from '../layouts/Layout.astro';
---

<Layout title="Dashboard">
  <main class="flex items-center justify-center min-h-screen bg-gray-100">
    <div class="bg-white p-8 rounded-lg shadow-md w-full max-w-md text-center">
      <h1 class="text-3xl font-bold text-gray-800 mb-4">¡Bienvenido al Dashboard!</h1>
      <p class="text-gray-600">Has iniciado sesión exitosamente.</p>
      <button id="logoutButton" class="mt-6 px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2">
        Cerrar Sesión
      </button>
    </div>
  </main>

  <script is:inline client:load>
    // Client-side script to protect the dashboard
    const accessToken = localStorage.getItem('access_token');
    if (!accessToken) {
      window.location.href = '/login';
    }

    // Logout functionality
    document.getElementById('logoutButton').addEventListener('click', () => {
      localStorage.removeItem('access_token');
      localStorage.removeItem('user'); // Also remove user data if stored
      localStorage.removeItem('token_type');
      localStorage.removeItem('expires_in');
      window.location.href = '/login';
    });
  </script>
</Layout>
